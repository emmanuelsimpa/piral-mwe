var piralPageLayouts=(()=>{var A=Object.create;var l=Object.defineProperty,T=Object.defineProperties,x=Object.getOwnPropertyDescriptor,D=Object.getOwnPropertyDescriptors,W=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,j=Object.getPrototypeOf,h=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var b=(t,e,o)=>e in t?l(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,i=(t,e)=>{for(var o in e||(e={}))h.call(e,o)&&b(t,o,e[o]);if(d)for(var o of d(e))k.call(e,o)&&b(t,o,e[o]);return t},n=(t,e)=>T(t,D(e)),R=t=>l(t,"__esModule",{value:!0});var P=(t=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(t,{get:(e,o)=>(typeof require!="undefined"?require:e)[o]}):t)(function(t){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});var S=(t,e)=>{R(t);for(var o in e)l(t,o,{get:e[o],enumerable:!0})},E=(t,e,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of W(e))!h.call(t,r)&&r!=="default"&&l(t,r,{get:()=>e[r],enumerable:!(o=x(e,r))||o.enumerable});return t},f=t=>E(R(l(t!=null?A(j(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var F={};S(F,{createPageLayoutsApi:()=>B});var L={};S(L,{registerPageLayout:()=>K,unregisterPageLayout:()=>O});var c=f(P("piral-core"));function K(t,e,o){t.dispatch(r=>n(i({},r),{registry:n(i({},r.registry),{pageLayouts:(0,c.withKey)(r.registry.pageLayouts,e,o)})}))}function O(t,e){t.dispatch(o=>n(i({},o),{registry:n(i({},o.registry),{pageLayouts:(0,c.withoutKey)(o.registry.pageLayouts,e)})}))}var m=f(P("react")),y=f(P("piral-core"));function q(t){let e={};return t&&typeof t=="object"&&Object.keys(t).forEach(o=>{e[o]={pilet:void 0,component:t[o]}}),e}var w=t=>(0,y.defaultRender)(t.children);function v(t=w,e="default"){return o=>{var g;let r=((g=o.meta)==null?void 0:g.layout)||e,s=(0,y.useGlobalState)(a=>a.registry.pageLayouts[r]||a.registry.pageLayouts[e]),p=(s==null?void 0:s.component)||w;return(0,m.createElement)(p,o,(0,m.createElement)(t,o))}}function z(t,e){return o=>n(i({},o),{registry:n(i({},o.registry),{wrappers:n(i({},o.registry.wrappers),{page:v(o.registry.wrappers.page,e)}),pageLayouts:t})})}function B(t={}){let{layouts:e={},fallback:o}=t;return r=>{let s=p=>r.readState(g=>g.registry.pageLayouts[p]);return r.defineActions(L),r.dispatch(z(q(e),o)),p=>{let g=p.meta.name;return{registerPageLayout(a,u){let C=s(a);if(!C||C.pilet===g){let G=(0,y.withApi)(r,u,p,"pageLayout");r.registerPageLayout(a,{component:G,pilet:g})}return()=>p.unregisterPageLayout(a)},unregisterPageLayout(a){let u=s(a);(u==null?void 0:u.pilet)===g&&r.unregisterPageLayout(a)}}}}}return F;})();
